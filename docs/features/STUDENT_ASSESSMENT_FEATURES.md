# 学生端测评系统功能说明

## 新增功能概述

本次实现了一个增强版的学生端测评系统，提供了更好的用户体验和功能完整性。

## 主要功能特性

### 1. 测评说明页面

- **名称和类型显示**: 显示测评/测验/IQ测试的名称和类型标识
- **预计耗时**: 显示预估完成时间（分钟）
- **可尝试次数**: 显示允许的最大尝试次数
- **规则说明**: 根据测评类型显示不同的规则说明
    - 调研问卷：无标准答案，提交后显示感谢页面
    - 测验/测评/IQ测试：有标准答案，提交后显示成绩和正确答案
- **详细信息**: 显示题目数量、题目类型（单选/多选）等信息

### 2. 倒计时控制

- **实时倒计时**: 在测评过程中显示剩余时间
- **时间警告**: 剩余时间不足5分钟时显示红色警告
- **自动提交**: 时间到达时自动提交答案，无需用户手动操作
- **时间追踪**: 记录用户实际花费的时间

### 3. 逐题作答体验

- **步进式导航**: 一次显示一道题目，支持上一题/下一题导航
- **进度条显示**: 实时显示答题进度
- **答案保存**: 自动保存用户的选择，支持返回修改
- **题目计数**: 显示当前题目序号和总题目数

### 4. 题型适配体验

#### Quiz/IQ 测试类型

- **评分系统**: 自动计算得分和正确率
- **详细反馈**: 显示每题的正确/错误状态
- **正确答案显示**: 对于错误的题目显示正确答案
- **解释说明**: 如有解释，会显示题目的详细解释
- **成绩统计**: 显示总分、正确率百分比

#### Survey 调研类型

- **感谢页面**: 提交后显示简洁的感谢页面
- **无评分**: 不进行正确性判断和评分
- **意见收集**: 专注于收集用户的真实想法和反馈

### 5. 多种访问方式

- **增强版界面**: `/assessment/{slug}` - 提供完整的新功能体验
- **经典版界面**: `/survey/{slug}` - 保持原有的简单界面
- **智能推荐**: 在首页为不同类型的测评推荐合适的界面

## 技术实现

### 前端组件

- `StudentAssessment.jsx`: 新的增强版测评组件
- 支持React Hooks进行状态管理
- 响应式设计，适配移动端和桌面端

### 后端扩展

- 扩展了Survey模型，支持时间限制、最大尝试次数等新字段
- 更新了API接口，支持新的答案格式和自动提交标记
- 兼容原有数据格式，确保向后兼容性

### 数据库字段

```javascript
// Survey模型新增字段
{
  timeLimit: Number,        // 时间限制（分钟）
  maxAttempts: Number,      // 最大尝试次数
  instructions: String,     // 测评说明
  navigationMode: String    // 导航模式
}

// Response模型新增字段
{
  timeSpent: Number,        // 实际花费时间（秒）
  isAutoSubmit: Boolean     // 是否自动提交
}
```

## 使用方法

### 创建测评

1. 在管理后台创建新的survey
2. 设置type为'quiz'、'assessment'或'iq'
3. 可选择设置timeLimit（分钟）和maxAttempts
4. 添加题目和正确答案

### 学生参与测评

1. 访问首页查看可用的测评列表
2. 选择"增强版测评"获得完整体验
3. 阅读测评说明并填写个人信息
4. 开始答题，系统会自动显示倒计时和进度
5. 完成后查看详细的成绩报告

### 管理后台

- 可以查看学生的答题时间、是否自动提交等详细信息
- 支持统计分析功能，了解测评效果

## 兼容性说明

- 新功能完全向后兼容，不影响现有数据和功能
- 原有的`/survey/{slug}`路径继续工作
- 支持新旧两种答案格式的数据处理
- 可以平滑迁移到新系统，无需数据转换

## 浏览器支持

- Chrome 80+
- Firefox 75+
- Safari 13+
- Edge 80+
- 移动端浏览器支持

## 未来扩展

计划中的功能：

- 分页模式支持（一页显示多道题）
- 题目随机排序
- 答题暂停和恢复功能
- 更多的统计和分析功能
- 多语言支持
