# Onboarding æ•°æ®ä¿å­˜éªŒè¯æ£€æŸ¥æ¸…å•

## ğŸ“‹ æ•°æ®ä¿å­˜æµç¨‹æ£€æŸ¥

### âœ… å·²éªŒè¯çš„æ•°æ®ä¿å­˜åŠŸèƒ½

#### 1. **æ•°æ®åº“æ¨¡å‹ (Company.js)**

- âœ… æ‰€æœ‰ onboarding å­—æ®µå·²æ­£ç¡®å®šä¹‰
- âœ… å­—æ®µç±»å‹å’ŒéªŒè¯è§„åˆ™æ­£ç¡®
- âœ… é»˜è®¤å€¼è®¾ç½®åˆç†
- âœ… æšä¸¾å€¼å®šä¹‰å®Œæ•´

#### 2. **API è·¯ç”± (routes/companies.js)**

- âœ… GET `/api/companies/current` - è·å–å…¬å¸ä¿¡æ¯
- âœ… PATCH `/api/companies/current` - æ›´æ–°å…¬å¸ä¿¡æ¯
- âœ… POST `/api/companies/complete-onboarding` - å®Œæˆ onboarding
- âœ… JWT è®¤è¯ä¸­é—´ä»¶æ­£ç¡®é…ç½®
- âœ… é”™è¯¯å¤„ç†å®Œå–„

#### 3. **å‰ç«¯çŠ¶æ€ç®¡ç† (OnboardingContext.tsx)**

- âœ… `saveStepData` å‡½æ•°æ­£ç¡®å®ç°
- âœ… `completeOnboarding` å‡½æ•°æ­£ç¡®å®ç°
- âœ… é”™è¯¯å¤„ç†å’ŒåŠ è½½çŠ¶æ€ç®¡ç†
- âœ… æ•°æ®è·å–å’Œè¡¨å•é¢„å¡«å……

#### 4. **å„æ­¥éª¤ç»„ä»¶æ•°æ®ä¿å­˜**

##### Step 1 - å…¬å¸ä¿¡æ¯

- âœ… å­—æ®µæ˜ å°„ï¼š`companyName` â†’ `name`
- âœ… ä¿å­˜å­—æ®µï¼š`name`, `logoUrl`, `industry`, `size`
- âœ… å¿…å¡«éªŒè¯ï¼šå…¬å¸åç§°
- âœ… å›¾ç‰‡ä¸Šä¼ é›†æˆ

##### Step 2 - è”ç³»ä¿¡æ¯

- âœ… ä¿å­˜å­—æ®µï¼š`contactName`, `contactEmail`, `role`
- âœ… å¿…å¡«éªŒè¯ï¼šè”ç³»äººå§“åã€é‚®ç®±
- âœ… é‚®ç®±æ ¼å¼éªŒè¯

##### Step 3 - å“ç‰Œè®¾ç½®

- âœ… ä¿å­˜å­—æ®µï¼š`themeColor`, `customLogoEnabled`
- âœ… é¢œè‰²æ ¼å¼éªŒè¯
- âœ… **å·²ä¿®å¤**: è·³è¿‡æ—¶ä¹Ÿä¿å­˜æ•°æ®

##### Step 4 - ç³»ç»Ÿåå¥½

- âœ… ä¿å­˜å­—æ®µï¼š`defaultLanguage`, `autoNotifyCandidate`
- âœ… å®Œæˆ onboarding çŠ¶æ€æ›´æ–°
- âœ… è·³è½¬åˆ°ç®¡ç†é¢æ¿

## ğŸ” æ•°æ®ä¿å­˜éªŒè¯æ–¹æ³•

### æ–¹æ³• 1: ä½¿ç”¨æµ‹è¯•è„šæœ¬

```bash
node test-onboarding-data.js
```

### æ–¹æ³• 2: æµè§ˆå™¨å¼€å‘è€…å·¥å…·

1. æ‰“å¼€ç½‘ç»œé¢æ¿
2. å®Œæˆ onboarding å„æ­¥éª¤
3. æ£€æŸ¥ API è¯·æ±‚å’Œå“åº”
4. éªŒè¯æ•°æ®æ­£ç¡®å‘é€å’Œæ¥æ”¶

### æ–¹æ³• 3: æ•°æ®åº“ç›´æ¥æŸ¥è¯¢

```javascript
// MongoDB æŸ¥è¯¢ç¤ºä¾‹
db.companies.findOne({ _id: ObjectId('company_id') });
```

## ğŸ› å·²å‘ç°å¹¶ä¿®å¤çš„é—®é¢˜

### âœ… é—®é¢˜ 1: Step 3 è·³è¿‡æ—¶æ•°æ®ä¸¢å¤±

**é—®é¢˜**: ç”¨æˆ·è·³è¿‡ç¬¬ä¸‰æ­¥æ—¶ï¼Œå½“å‰æ­¥éª¤çš„æ•°æ®ä¸ä¼šä¿å­˜
**ä¿®å¤**: ä¿®æ”¹ `handleSkip` å‡½æ•°ï¼Œåœ¨è·³è¿‡å‰ä¿å­˜å½“å‰æ•°æ®

```typescript
const handleSkip = async () => {
	// Save current data even when skipping
	await saveStepData({
		themeColor: step3Data.themeColor,
		customLogoEnabled: step3Data.customLogoEnabled,
	});
	setCurrentStep(4);
};
```

## ğŸ“Š æ•°æ®å®Œæ•´æ€§æ£€æŸ¥

### å„æ­¥éª¤æ•°æ®å­—æ®µæ˜ å°„

| å‰ç«¯å­—æ®µ            | åç«¯å­—æ®µ            | æ•°æ®ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼  |
| ------------------- | ------------------- | -------- | ---- | ------- |
| **Step 1**          |
| companyName         | name                | String   | âœ…   | -       |
| logoUrl             | logoUrl             | String   | âŒ   | -       |
| industry            | industry            | String   | âŒ   | -       |
| size                | size                | Enum     | âŒ   | -       |
| **Step 2**          |
| contactName         | contactName         | String   | âœ…   | -       |
| contactEmail        | contactEmail        | String   | âœ…   | -       |
| role                | role                | String   | âŒ   | -       |
| **Step 3**          |
| themeColor          | themeColor          | String   | âŒ   | #3B82F6 |
| customLogoEnabled   | customLogoEnabled   | Boolean  | âŒ   | false   |
| **Step 4**          |
| defaultLanguage     | defaultLanguage     | Enum     | âŒ   | en      |
| autoNotifyCandidate | autoNotifyCandidate | Boolean  | âŒ   | true    |

### ç‰¹æ®Šå­—æ®µå¤„ç†

1. **isOnboardingCompleted**
    - åˆå§‹å€¼: `false`
    - å®Œæˆæ—¶è®¾ä¸º: `true`
    - åªåœ¨æœ€åä¸€æ­¥æ›´æ–°

2. **updatedAt**
    - è‡ªåŠ¨æ›´æ–°æ—¶é—´æˆ³
    - æ¯æ¬¡ä¿å­˜æ—¶è§¦å‘

## ğŸ§ª æµ‹è¯•åœºæ™¯

### åœºæ™¯ 1: å®Œæ•´æµç¨‹æµ‹è¯•

1. æ³¨å†Œæ–°ç”¨æˆ·
2. ä¾æ¬¡å®Œæˆ 4 ä¸ªæ­¥éª¤
3. éªŒè¯æ¯æ­¥æ•°æ®éƒ½å·²ä¿å­˜
4. éªŒè¯æœ€ç»ˆå®ŒæˆçŠ¶æ€

### åœºæ™¯ 2: ä¸­æ–­æ¢å¤æµ‹è¯•

1. å®Œæˆå‰ 2 æ­¥
2. åˆ·æ–°é¡µé¢æˆ–é‡æ–°ç™»å½•
3. éªŒè¯å·²ä¿å­˜çš„æ•°æ®è¢«æ­£ç¡®åŠ è½½
4. ç»§ç»­å®Œæˆå‰©ä½™æ­¥éª¤

### åœºæ™¯ 3: è·³è¿‡æ­¥éª¤æµ‹è¯•

1. å®Œæˆç¬¬ 1ã€2 æ­¥
2. è·³è¿‡ç¬¬ 3 æ­¥
3. éªŒè¯ç¬¬ 3 æ­¥é»˜è®¤æ•°æ®è¢«ä¿å­˜
4. å®Œæˆç¬¬ 4 æ­¥

### åœºæ™¯ 4: é”™è¯¯å¤„ç†æµ‹è¯•

1. ç½‘ç»œä¸­æ–­æ—¶æäº¤æ•°æ®
2. æ— æ•ˆæ•°æ®æäº¤
3. éªŒè¯é”™è¯¯æç¤ºå’Œæ•°æ®å›æ»š

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

1. **æ•°æ®ä¿å­˜å¤±è´¥**
    - æ£€æŸ¥ç½‘ç»œè¿æ¥
    - éªŒè¯ JWT token æœ‰æ•ˆæ€§
    - æ£€æŸ¥æœåŠ¡å™¨æ—¥å¿—

2. **å­—æ®µæ˜ å°„é”™è¯¯**
    - å¯¹æ¯”å‰ç«¯å­—æ®µåå’Œåç«¯å­—æ®µå
    - æ£€æŸ¥ç±»å‹è½¬æ¢

3. **éªŒè¯å¤±è´¥**
    - æ£€æŸ¥å¿…å¡«å­—æ®µ
    - éªŒè¯æ•°æ®æ ¼å¼

4. **çŠ¶æ€ä¸åŒæ­¥**
    - æ£€æŸ¥ Context çŠ¶æ€æ›´æ–°
    - éªŒè¯ API å“åº”å¤„ç†

## ğŸ“ ç›‘æ§å»ºè®®

1. **æ·»åŠ æ—¥å¿—è®°å½•**

    ```javascript
    console.log('Saving step data:', stepData);
    console.log('API response:', response.data);
    ```

2. **æ·»åŠ æ•°æ®éªŒè¯**

    ```javascript
    if (!response.data.success) {
    	console.error('Save failed:', response.data.error);
    }
    ```

3. **æ·»åŠ æ€§èƒ½ç›‘æ§**
    ```javascript
    const startTime = Date.now();
    await saveStepData(data);
    console.log('Save time:', Date.now() - startTime, 'ms');
    ```

## âœ… éªŒè¯ç»“è®º

ç»è¿‡å…¨é¢æ£€æŸ¥ï¼ŒOnboarding æ•°æ®ä¿å­˜åŠŸèƒ½ï¼š

- âœ… **æ•°æ®æ¨¡å‹å®Œæ•´**: æ‰€æœ‰å­—æ®µæ­£ç¡®å®šä¹‰
- âœ… **API è·¯ç”±æ­£å¸¸**: å¢åˆ æ”¹æŸ¥åŠŸèƒ½å®Œæ•´
- âœ… **å‰ç«¯é€»è¾‘æ­£ç¡®**: çŠ¶æ€ç®¡ç†å’Œæ•°æ®æµæ­£å¸¸
- âœ… **é”™è¯¯å¤„ç†å®Œå–„**: ç½‘ç»œé”™è¯¯å’ŒéªŒè¯é”™è¯¯éƒ½æœ‰å¤„ç†
- âœ… **ç”¨æˆ·ä½“éªŒè‰¯å¥½**: åŠ è½½çŠ¶æ€å’Œé”™è¯¯æç¤ºæ¸…æ™°
- âœ… **æ•°æ®æŒä¹…åŒ–**: æ¯æ­¥æ•°æ®éƒ½ä¼šç«‹å³ä¿å­˜åˆ°æ•°æ®åº“

**æ€»ç»“**: Onboarding æ•°æ®ä¿å­˜åŠŸèƒ½å·²ç»å®Œæ•´å®ç°å¹¶ç»è¿‡éªŒè¯ï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚
